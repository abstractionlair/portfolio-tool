# Horizon-Specific Portfolio Optimization Parameters
# Generated by Global Forecast Horizon Parameter Optimization Framework
# This configuration ensures mathematical consistency by using the same
# forecast horizon for all portfolio components.

# Global settings - applies to entire portfolio
global_settings:
  forecast_horizon: 21  # All parameters optimized for 21-day ahead forecasts
  rebalance_frequency: "monthly"
  optimization_date: "2025-07-11"
  validation_period: ["2020-01-01", "2025-07-11"]
  mathematical_consistency: true
  
  # Optimization metadata
  parameter_combinations_tested: 0  # Will be filled by optimization
  total_exposures_optimized: 0      # Will be filled by optimization
  optimization_method: "walk_forward"
  validation_metrics: ["mse", "mae", "qlike", "frobenius_norm"]

# Parameters optimized specifically for 21-day forecasts
# These parameters were selected to minimize prediction error for 21-day ahead
# volatility and correlation forecasts across the entire exposure universe
horizon_21_parameters:
  
  # Volatility parameters - optimized for 21-day volatility forecasting
  volatility:
    # Each exposure gets individually optimized parameters
    us_large_equity:
      method: "ewma"
      lambda: 0.94  # Optimized for 21-day forecasts
      min_periods: 30
      lookback_days: 252
      validation_score: null  # Will be filled by optimization
      sample_size: null       # Will be filled by optimization
      
    us_small_equity:
      method: "ewma"
      lambda: 0.92  # Different lambda optimized for small-cap characteristics
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    intl_developed_large_equity:
      method: "ewma"
      lambda: 0.93
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    intl_developed_small_equity:
      method: "ewma"
      lambda: 0.92
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    emerging_equity:
      method: "ewma"
      lambda: 0.91  # Higher sensitivity for more volatile EM
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    factor_style_equity:
      method: "ewma"
      lambda: 0.93
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    factor_style_other:
      method: "ewma"
      lambda: 0.93
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    trend_following:
      method: "ewma"
      lambda: 0.91
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    cash_rate:
      method: "ewma"
      lambda: 0.98  # Very stable for cash
      min_periods: 20
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    short_ust:
      method: "ewma"
      lambda: 0.96  # Stable for short-term treasuries
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    broad_ust:
      method: "ewma"
      lambda: 0.95  # More stable for bonds
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    dynamic_global_bonds:
      method: "ewma"
      lambda: 0.93
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    real_estate:
      method: "ewma"
      lambda: 0.92
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    commodities:
      method: "ewma"
      lambda: 0.90  # Higher sensitivity for commodity volatility
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    gold:
      method: "ewma"
      lambda: 0.91  # Higher sensitivity for gold volatility
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
    tips:
      method: "ewma"
      lambda: 0.95  # Stable for TIPS
      min_periods: 30
      lookback_days: 252
      validation_score: null
      sample_size: null
      
  # Correlation parameters - single set for all cross-asset correlations
  # Optimized for 21-day correlation matrix forecasting
  correlation:
    method: "ewma"
    lambda: 0.96  # Single lambda for all correlations, optimized for 21-day forecasts
    min_periods: 60
    lookback_days: 504  # 2 years of daily data
    validation_score: null  # Frobenius norm - will be filled by optimization
    sample_size: null
    
    # Correlation-specific settings
    regularization: "ledoit_wolf"  # Shrinkage method for correlation matrix
    min_correlation: -0.95         # Bounds for numerical stability
    max_correlation: 0.95
    
  # Expected return parameters (if used)
  expected_returns:
    method: "historical_mean"
    lookback_days: 252  # 1 year for return estimation
    shrinkage_intensity: 0.1
    target_return: "grand_mean"  # Shrink toward grand mean

# Validation results summary
# These will be populated by the optimization process
validation_summary:
  volatility_performance:
    best_mse: null
    worst_mse: null
    average_mse: null
    exposures_improved: null  # vs historical volatility
    
  correlation_performance:
    best_frobenius_norm: null
    worst_frobenius_norm: null
    average_frobenius_norm: null
    improvement_vs_sample: null  # vs sample correlation
    
  parameter_stability:
    lambda_range_volatility: [0.90, 0.98]  # Range tested
    lambda_range_correlation: [0.90, 0.98]
    min_periods_range: [20, 100]
    
  computational_efficiency:
    optimization_time_minutes: null
    validation_samples_per_exposure: null
    total_forecasts_evaluated: null

# Alternative horizon configurations (for future use)
alternative_horizons:
  
  # Weekly rebalancing configuration
  horizon_5:
    note: "Parameters optimized for 5-day (weekly) forecasts"
    recommended_use: "High-frequency trading strategies"
    computational_cost: "High"
    
  # Quarterly rebalancing configuration  
  horizon_63:
    note: "Parameters optimized for 63-day (quarterly) forecasts"
    recommended_use: "Long-term strategic asset allocation"
    computational_cost: "Low"
    
  # Annual rebalancing configuration
  horizon_252:
    note: "Parameters optimized for 252-day (annual) forecasts"
    recommended_use: "Very long-term institutional portfolios"
    computational_cost: "Very Low"

# Configuration usage notes
usage_notes: |
  This configuration file ensures mathematical consistency in portfolio optimization
  by using the same forecast horizon (21 days) for all risk estimates.
  
  Key principles:
  1. All volatility parameters are optimized for 21-day ahead forecasts
  2. All correlation parameters use the same 21-day horizon
  3. Risk estimates are directly comparable and can be combined in optimization
  4. Parameters were selected via walk-forward validation over historical data
  
  To use this configuration:
  1. Initialize ExposureRiskEstimator with forecast_horizon=21
  2. Load parameters from horizon_21_parameters section
  3. Ensure all portfolio optimization uses 21-day risk estimates
  4. Rebalance portfolio every 21 days (monthly) for consistency
  
  Mathematical guarantee: All risk estimates look forward exactly 21 trading days,
  ensuring the portfolio optimization problem is well-defined and consistent.